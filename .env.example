# ==============================================
# Formio Docker Environment Configuration
# ==============================================
# Copy this file to '.env' and update with your actual values.
# NEVER commit the actual '.env' file to version control.

# ==============================================
# 1. Domains & Networking (CRITICAL)
# ==============================================
# The public-facing domains for your application.
# Update these to match your Route 53 DNS records.
SPA_DOMAIN=forms.your-domain.com
API_DOMAIN=api.forms.your-domain.com
EMAIL=admin@your-domain.com

# Form.io Server Settings
# These typically match your API_DOMAIN.
FORMIO_DOMAIN=https://api.forms.your-domain.com
FORMIO_HOST=api.forms.your-domain.com
FORMIO_PROTOCOL=https

# CORS Settings (Required for SPA to talk to API)
FORMIO_CORS_ENABLED=true
# Must match SPA_DOMAIN (and localhost for dev if needed)
FORMIO_ALLOWED_ORIGINS=https://forms.your-domain.com

# Reverse Proxy Settings (CRITICAL for Production)
# Required because the app runs behind Caddy.
# Ensures correct IP logging and protocol detection.
FORMIO_TRUST_PROXY=true

# ==============================================
# 2. Security & Secrets (GENERATE NEW VALUES)
# ==============================================
# Form.io root administrator account
ROOT_EMAIL=admin@your-domain.com
ROOT_PASSWORD=change_this_secure_password

# JWT Secret for signing tokens (openssl rand -base64 32)
JWT_SECRET=change_this_very_long_random_jwt_secret_key
JWT_EXPIRES_IN=1h

# Database encryption secret (openssl rand -base64 32)
MONGO_SECRET=change_this_random_mongo_secret_key

# CLI Authentication Keys
# API_KEYS is the key(s) the currently-running Form.io server accepts (dev/staging/prod)
# For the Community Edition, this is just a comma-separated list of tokens.
API_KEYS=change_this_to_random_string_for_cli_auth

# Production CLI destination settings (used by scripts/cli-deploy-production.sh)
PROD_FORMIO_DOMAIN=https://api.forms.your-domain.com
PROD_API_KEYS=change_this_to_random_string_for_cli_auth

# ==============================================
# 3. Database Configuration
# ==============================================
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=change_this_secure_mongo_password
MONGO_DB_NAME=formio
MONGO_CA=

# ==============================================
# 4. AWS Backups (S3)
# ==============================================
# Bucket Name from CloudFormation Output
BACKUPS_S3_BACKUP_BUCKET=radio-forms-backups-ACCOUNTID-production
BACKUPS_AWS_DEFAULT_REGION=us-east-1
# Leave keys blank if using EC2 IAM Role (Recommended)
BACKUPS_AWS_ACCESS_KEY_ID=
BACKUPS_AWS_SECRET_ACCESS_KEY=

# ==============================================
# 5. Deployment / Server Info
# ==============================================
# Used by deployment scripts
PROD_SERVER=0.0.0.0
PROD_USER=admin
PROD_APP_DIR=/home/admin/radio-forms-portal
PROD_BACKUP_DIR=/home/admin/backups

# Logging
LOG_LEVEL=info
DEBUG=formio:*