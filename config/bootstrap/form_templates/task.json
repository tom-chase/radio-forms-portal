{
  "title": "Task",
  "name": "task",
  "path": "task",
  "type": "resource",
  "display": "form",
  "tags": [""],
  "components": [
    {
      "label": "Task Title",
      "tableView": true,
      "key": "title",
      "type": "textfield",
      "input": true,
      "validate": { "required": true }
    },
    {
      "label": "Details / Checklist",
      "autoExpand": false,
      "tableView": false,
      "key": "details",
      "type": "textarea",
      "editor": "ckeditor",
      "input": true,
      "description": "Use the todo-list toolbar in the editor to track subtasks."
    },
    {
      "label": "Status",
      "widget": "choicesjs",
      "tableView": true,
      "data": {
        "values": [
          { "label": "Open", "value": "open" },
          { "label": "In progress", "value": "in_progress" },
          { "label": "Blocked", "value": "blocked" },
          { "label": "Done", "value": "done" }
        ]
      },
      "key": "status",
      "type": "select",
      "input": true,
      "defaultValue": "open"
    },
    {
      "label": "Priority",
      "widget": "choicesjs",
      "tableView": true,
      "data": {
        "values": [
          { "label": "Low", "value": "low" },
          { "label": "Normal", "value": "normal" },
          { "label": "High", "value": "high" },
          { "label": "Urgent", "value": "urgent" }
        ]
      },
      "key": "priority",
      "type": "select",
      "input": true,
      "defaultValue": "normal"
    },
    {
      "label": "Due Date",
      "widget": "calendar",
      "tableView": true,
      "enableTime": false,
      "format": "yyyy-MM-dd",
      "key": "dueDate",
      "type": "datetime",
      "input": true
    },
    {
      "label": "Category / Area",
      "widget": "choicesjs",
      "tableView": true,
      "data": {
        "values": [
          { "label": "Underwriting", "value": "underwriting" },
          { "label": "Volunteers", "value": "volunteers" },
          { "label": "Programming / Shows", "value": "programming" },
          { "label": "Engineering / Tech", "value": "engineering" },
          { "label": "Fund Drive", "value": "fund_drive" },
          { "label": "Other", "value": "other" }
        ]
      },
      "key": "category",
      "type": "select",
      "input": true
    },
    {
      "label": "Internal Notes",
      "autoExpand": false,
      "tableView": false,
      "key": "internalNotes",
      "type": "textarea",
      "editor": "ckeditor",
      "input": true,
      "description": "For staff-only notes; you can later hide this from volunteers using conditional logic."
    },
    {
      "title": "Share Settings",
      "theme": "primary",
      "collapsible": true,
      "collapsed": true,
      "key": "shareSettings",
      "type": "panel",
      "label": "Share Settings",
      "input": false,
      "tableView": false,
      "persistent": false,
      "clearOnHide": false,
      "components": [
        {
          "label": "Share with Public",
          "key": "sharePublic",
          "type": "checkbox",
          "input": true,
          "defaultValue": false,
          "labelPosition": "right",
          "tableView": true,
          "persistent": true,
          "id": "task_sharepub"
        },
        {
          "label": "Share with Roles",
          "widget": "choicesjs",
          "tableView": true,
          "multiple": true,
          "dataSrc": "values",
          "data": {
            "values": [
              { "label": "Administrator", "value": "administrator" },
              { "label": "Management", "value": "management" },
              { "label": "Staff", "value": "staff" }
            ]
          },
          "template": "<span>{{ item.label }}</span>",
          "valueProperty": "value",
          "key": "shareRoles",
          "type": "select",
          "input": true,
          "persistent": true,
          "searchEnabled": true,
          "id": "task_shareroles"
        },
        {
          "label": "Share with Departments",
          "widget": "choicesjs",
          "tableView": true,
          "multiple": true,
          "dataSrc": "resource",
          "data": { "resource": "department" },
          "valueProperty": "_id",
          "dataType": "resource",
          "template": "<span>{{ item.data.name }}</span>",
          "key": "shareDepartments",
          "type": "select",
          "input": true,
          "persistent": true,
          "searchEnabled": true,
          "authenticate": true,
          "id": "task_sharedepts"
        },
        {
          "label": "Share with Committees",
          "widget": "choicesjs",
          "tableView": true,
          "multiple": true,
          "dataSrc": "resource",
          "data": { "resource": "committee" },
          "valueProperty": "_id",
          "dataType": "resource",
          "template": "<span>{{ item.data.name }}</span>",
          "key": "shareCommittees",
          "type": "select",
          "input": true,
          "persistent": true,
          "searchEnabled": true,
          "authenticate": true,
          "id": "task_sharecomms"
        },
        {
          "label": "Share with Users",
          "widget": "choicesjs",
          "tableView": true,
          "multiple": true,
          "dataSrc": "resource",
          "data": { "resource": "user" },
          "valueProperty": "_id",
          "dataType": "resource",
          "template": "<span>{{ item.data.email }}</span>",
          "key": "shareUsers",
          "type": "select",
          "input": true,
          "persistent": true,
          "searchEnabled": true,
          "authenticate": true,
          "lazyLoad": true,
          "id": "task_shareusers"
        }
      ]
    },
    {
      "label": "Submit",
      "showValidations": false,
      "theme": "primary",
      "key": "submit",
      "type": "button",
      "input": true,
      "saveOnEnter": true
    }
  ],
  "access": [
    {
      "type": "read_all",
      "roles": ["authenticated", "staff", "management", "administrator"]
    }
  ],
  "submissionAccess": [
    {
      "type": "read_all",
      "roles": ["authenticated", "staff", "management", "administrator"]
    },
    {
      "type": "create_all",
      "roles": ["authenticated", "staff", "management", "administrator"]
    },
    {
      "type": "update_own",
      "roles": ["authenticated", "staff", "management", "administrator"]
    },
    {
      "type": "delete_own",
      "roles": ["authenticated", "staff", "management", "administrator"]
    },
    {
      "type": "update_all",
      "roles": ["management", "administrator"]
    },
    {
      "type": "delete_all",
      "roles": ["management", "administrator"]
    }
  ]
}
