{
  "title": "Underwriting Log Entries",
  "name": "uwLogs",
  "path": "uwlogs",
  "type": "resource",
  "display": "form",
  "tags": ["Underwriting"],
  "access": [
    {
      "type": "read_all",
      "roles": ["programmer", "staff", "underwriting", "management", "administrator"]
    }
  ],
  "submissionAccess": [
    {
      "type": "read_all",
      "roles": ["programmer", "staff", "underwriting", "management", "administrator"]
    },
    {
      "type": "create_all",
      "roles": ["programmer", "underwriting", "management", "administrator"]
    },
    {
      "type": "update_all",
      "roles": ["programmer", "underwriting", "management", "administrator"]
    },
    {
      "type": "delete_all",
      "roles": ["programmer", "underwriting", "management", "administrator"]
    }
  ],
  "settings": {
    "ui": {
      "alternateTitle": "Aircheck Logs",
      "submissionsTitle": "Aircheck Logs",
      "sortOrder": 6
    },
    "tabulatorList": {
      "enabled": true,
      "responsiveLayout": "hide",
      "columns": [
        {
          "field": "data.airDateTime",
          "title": "Air Date/Time",
          "responsive": 0,
          "minWidth": 150,
          "formatter": "datetime",
          "formatterParams": {
            "inputFormat": "iso",
            "outputFormat": "MMM d, yyyy HH:mm",
            "timezone": "America/New_York"
          }
        },
        {
          "field": "data.campaign",
          "title": "Campaign",
          "responsive": 0,
          "minWidth": 150
        },
        {
          "field": "data.spot",
          "title": "Spot",
          "responsive": 1,
          "minWidth": 150
        },
        {
          "field": "data.programName",
          "title": "Program",
          "responsive": 1,
          "width": 120
        },
        {
          "field": "data.source",
          "title": "Source",
          "responsive": 2,
          "width": 100
        }
      ]
    }
  },
  "components": [
    {
      "label": "Air Information",
      "key": "airInfo",
      "type": "panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "Air Date/Time",
          "key": "airDateTime",
          "type": "datetime",
          "input": true,
          "tableView": true,
          "enableTime": true,
          "format": "yyyy-MM-dd HH:mm",
          "validate": {
            "required": true
          },
          "description": "When the spot aired"
        },
        {
          "label": "Campaign",
          "key": "campaign",
          "type": "select",
          "widget": "choicesjs",
          "input": true,
          "tableView": true,
          "dataSrc": "resource",
          "data": {
            "resource": "uwCampaigns"
          },
          "valueProperty": "_id",
          "template": "<span>{{ item.data.campaignName }}</span>",
          "searchEnabled": true,
          "reference": true
        },
        {
          "label": "Spot",
          "key": "spot",
          "type": "select",
          "widget": "choicesjs",
          "input": true,
          "tableView": true,
          "dataSrc": "resource",
          "data": {
            "resource": "uwSpots"
          },
          "valueProperty": "_id",
          "template": "<span>{{ item.data.spotName }}</span>",
          "searchEnabled": true,
          "description": "Which spot was aired",
          "reference": true
        }
      ]
    },
    {
      "label": "Program Details",
      "key": "programDetails",
      "type": "panel",
      "input": false,
      "tableView": false,
      "components": [
        {
          "label": "Program Name",
          "key": "programName",
          "type": "textfield",
          "input": true,
          "tableView": true,
          "description": "Show/program name"
        },
        {
          "label": "Position Notes",
          "key": "positionNotes",
          "type": "textfield",
          "input": true,
          "tableView": false,
          "description": "Break position (e.g., 'Top of hour', 'Mid-break')"
        }
      ]
    },
    {
      "label": "Source",
      "key": "source",
      "type": "select",
      "widget": "choicesjs",
      "input": true,
      "tableView": true,
      "dataSrc": "values",
      "data": {
        "values": [
          { "label": "Manual Entry", "value": "manual" },
          { "label": "Automation Import", "value": "automation" },
          { "label": "Digital Upload", "value": "digital_upload" }
        ]
      },
      "defaultValue": "manual",
      "description": "How this log entry was created"
    },
    {
      "label": "Audio File Reference",
      "key": "audioFileRef",
      "type": "panel",
      "input": false,
      "tableView": false,
      "description": "For future integration with digital audio serving",
      "components": [
        {
          "label": "Audio File URL",
          "key": "audioFileUrl",
          "type": "url",
          "input": true,
          "tableView": false,
          "description": "URL to served audio file (for future upload/serving integration)"
        },
        {
          "label": "File Hash/Checksum",
          "key": "fileHash",
          "type": "textfield",
          "input": true,
          "tableView": false,
          "description": "For verification and deduplication"
        }
      ]
    },
    {
      "label": "Notes",
      "key": "notes",
      "type": "textarea",
      "input": true,
      "tableView": false,
      "rows": 3,
      "description": "Any additional notes about this airing"
    },
    {
      "label": "Submit",
      "key": "submit",
      "type": "button",
      "action": "submit",
      "theme": "primary",
      "input": true
    }
  ]
}
